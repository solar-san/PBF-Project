<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Marco Solari, 875475">

<title>Project: The Forecasting Tourism 2010 Competition</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="PBF-Project_HTML_files/libs/clipboard/clipboard.min.js"></script>
<script src="PBF-Project_HTML_files/libs/quarto-html/quarto.js"></script>
<script src="PBF-Project_HTML_files/libs/quarto-html/popper.min.js"></script>
<script src="PBF-Project_HTML_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="PBF-Project_HTML_files/libs/quarto-html/anchor.min.js"></script>
<link href="PBF-Project_HTML_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="PBF-Project_HTML_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="PBF-Project_HTML_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="PBF-Project_HTML_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="PBF-Project_HTML_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<link href="PBF-Project_HTML_files/libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="PBF-Project_HTML_files/libs/pagedtable-1.1/js/pagedtable.js"></script>
<meta name="author" content="solar-san">
<meta name="image" property="">
<meta name="description" content="">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&amp;family=Fira+Code&amp;display=swap" rel="stylesheet">

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#setup-and-data-loading" id="toc-setup-and-data-loading" class="nav-link active" data-scroll-target="#setup-and-data-loading">Setup and Data Loading</a>
  <ul class="collapse">
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#sec-dataload" id="toc-sec-dataload" class="nav-link" data-scroll-target="#sec-dataload">Loading Data</a></li>
  <li><a href="#creating-a-tsibble" id="toc-creating-a-tsibble" class="nav-link" data-scroll-target="#creating-a-tsibble">Creating a <code>tsibble</code></a></li>
  </ul></li>
  <li><a href="#assignment" id="toc-assignment" class="nav-link" data-scroll-target="#assignment">Assignment</a>
  <ul class="collapse">
  <li><a href="#full-plot" id="toc-full-plot" class="nav-link" data-scroll-target="#full-plot">Full Plot</a>
  <ul class="collapse">
  <li><a href="#everything-everywhere-all-at-once" id="toc-everything-everywhere-all-at-once" class="nav-link" data-scroll-target="#everything-everywhere-all-at-once">Everything, Everywhere, All At Once</a></li>
  <li><a href="#plotting-series-by-starting-year" id="toc-plotting-series-by-starting-year" class="nav-link" data-scroll-target="#plotting-series-by-starting-year">Plotting Series By Starting Year</a></li>
  </ul></li>
  <li><a href="#creating-validation-set" id="toc-creating-validation-set" class="nav-link" data-scroll-target="#creating-validation-set">Creating Validation Set</a></li>
  <li><a href="#naïve-forecasts" id="toc-naïve-forecasts" class="nav-link" data-scroll-target="#naïve-forecasts">Naïve Forecasts</a></li>
  <li><a href="#sec-measures" id="toc-sec-measures" class="nav-link" data-scroll-target="#sec-measures">Choosing Measures</a></li>
  <li><a href="#computing-mape" id="toc-computing-mape" class="nav-link" data-scroll-target="#computing-mape">Computing MAPE</a>
  <ul class="collapse">
  <li><a href="#training-period" id="toc-training-period" class="nav-link" data-scroll-target="#training-period">Training Period:</a></li>
  <li><a href="#validation-period" id="toc-validation-period" class="nav-link" data-scroll-target="#validation-period">Validation Period:</a></li>
  <li><a href="#comparison-table" id="toc-comparison-table" class="nav-link" data-scroll-target="#comparison-table">Comparison Table</a></li>
  </ul></li>
  <li><a href="#computing-mase" id="toc-computing-mase" class="nav-link" data-scroll-target="#computing-mase">Computing MASE</a>
  <ul class="collapse">
  <li><a href="#sec-train_MASE" id="toc-sec-train_MASE" class="nav-link" data-scroll-target="#sec-train_MASE">Training Period:</a></li>
  <li><a href="#validation-period-1" id="toc-validation-period-1" class="nav-link" data-scroll-target="#validation-period-1">Validation Period:</a></li>
  <li><a href="#comparison-table-1" id="toc-comparison-table-1" class="nav-link" data-scroll-target="#comparison-table-1">Comparison Table:</a></li>
  </ul></li>
  <li><a href="#mape-mase-pairs" id="toc-mape-mase-pairs" class="nav-link" data-scroll-target="#mape-mase-pairs">MAPE &amp; MASE Pairs</a></li>
  <li><a href="#ensemble-methods" id="toc-ensemble-methods" class="nav-link" data-scroll-target="#ensemble-methods">Ensemble Methods</a>
  <ul class="collapse">
  <li><a href="#a.-write-the-exact-formula-used-for-generating-the-first-method-in-the-form-f_tk-...-where-k-1-2-3-4" id="toc-a.-write-the-exact-formula-used-for-generating-the-first-method-in-the-form-f_tk-...-where-k-1-2-3-4" class="nav-link" data-scroll-target="#a.-write-the-exact-formula-used-for-generating-the-first-method-in-the-form-f_tk-...-where-k-1-2-3-4">a. <em>Write the exact formula used for generating the first method, in the form</em> <span class="math inline">F_{t+k} = ...</span>, where <span class="math inline">k = 1, 2, 3, 4)</span>,</a></li>
  <li><a href="#b.-what-is-the-rationale-behind-multiplying-the-naive-forecasts-by-a-constant2" id="toc-b.-what-is-the-rationale-behind-multiplying-the-naive-forecasts-by-a-constant2" class="nav-link" data-scroll-target="#b.-what-is-the-rationale-behind-multiplying-the-naive-forecasts-by-a-constant2">b. <em>What is the rationale behind multiplying the naive forecasts by a constant?</em></a></li>
  <li><a href="#c.-what-should-be-the-dependent-variable-and-the-predictors-in-a-linear-regression-model-for-this-data-explain." id="toc-c.-what-should-be-the-dependent-variable-and-the-predictors-in-a-linear-regression-model-for-this-data-explain." class="nav-link" data-scroll-target="#c.-what-should-be-the-dependent-variable-and-the-predictors-in-a-linear-regression-model-for-this-data-explain.">c.&nbsp;<em>What should be the dependent variable and the predictors in a linear regression model for this data? Explain.</em></a></li>
  <li><a href="#d.-fit-the-linear-regression-model-to-the-first-five-series-and-compute-forecast-errors-for-the-validation-period." id="toc-d.-fit-the-linear-regression-model-to-the-first-five-series-and-compute-forecast-errors-for-the-validation-period." class="nav-link" data-scroll-target="#d.-fit-the-linear-regression-model-to-the-first-five-series-and-compute-forecast-errors-for-the-validation-period.">d.&nbsp;<em>Fit the linear regression model to the first five series and compute forecast errors for the validation period.</em></a></li>
  <li><a href="#e.-before-choosing-a-linear-regression-the-winner-described-the-following-process" id="toc-e.-before-choosing-a-linear-regression-the-winner-described-the-following-process" class="nav-link" data-scroll-target="#e.-before-choosing-a-linear-regression-the-winner-described-the-following-process">e. <em>Before choosing a linear regression, the winner described the following process:</em></a></li>
  <li><a href="#f.-if-we-were-to-consider-exponential-smoothing-what-particular-types-of-exponential-smoothing-are-reasonable-candidates" id="toc-f.-if-we-were-to-consider-exponential-smoothing-what-particular-types-of-exponential-smoothing-are-reasonable-candidates" class="nav-link" data-scroll-target="#f.-if-we-were-to-consider-exponential-smoothing-what-particular-types-of-exponential-smoothing-are-reasonable-candidates">f.&nbsp;<em>If we were to consider exponential smoothing, what particular type(s) of exponential smoothing are reasonable candidates?</em></a></li>
  <li><a href="#g.-the-winner-concludes-with-possible-improvements-one-being-an-investigation-into-how-to-come-up-with-a-blending-ensemble-method-that-doesnt-use-much-manual-tweaking-would-also-be-of-benefit.-can-you-suggest-methods-or-an-approach-that-would-lead-to-easier-automation-of-the-ensemble-step" id="toc-g.-the-winner-concludes-with-possible-improvements-one-being-an-investigation-into-how-to-come-up-with-a-blending-ensemble-method-that-doesnt-use-much-manual-tweaking-would-also-be-of-benefit.-can-you-suggest-methods-or-an-approach-that-would-lead-to-easier-automation-of-the-ensemble-step" class="nav-link" data-scroll-target="#g.-the-winner-concludes-with-possible-improvements-one-being-an-investigation-into-how-to-come-up-with-a-blending-ensemble-method-that-doesnt-use-much-manual-tweaking-would-also-be-of-benefit.-can-you-suggest-methods-or-an-approach-that-would-lead-to-easier-automation-of-the-ensemble-step">g. <em>The winner concludes with possible improvements one being “an investigation into how to come up with a blending ensemble method that doesn’t use much manual tweaking would also be of benefit”. Can you suggest methods or an approach that would lead to easier automation of the ensemble step?</em></a></li>
  <li><a href="#h.-the-competition-focused-on-minimizing-the-average-mape-of-the-next-four-values-across-all-518-series.-how-does-this-goal-differ-from-goals-encountered-in-practice-when-considering-tourism-demand-which-steps-in-the-forecasting-process-would-likely-be-different-in-a-real-life-tourism-forecasting-scenario" id="toc-h.-the-competition-focused-on-minimizing-the-average-mape-of-the-next-four-values-across-all-518-series.-how-does-this-goal-differ-from-goals-encountered-in-practice-when-considering-tourism-demand-which-steps-in-the-forecasting-process-would-likely-be-different-in-a-real-life-tourism-forecasting-scenario" class="nav-link" data-scroll-target="#h.-the-competition-focused-on-minimizing-the-average-mape-of-the-next-four-values-across-all-518-series.-how-does-this-goal-differ-from-goals-encountered-in-practice-when-considering-tourism-demand-which-steps-in-the-forecasting-process-would-likely-be-different-in-a-real-life-tourism-forecasting-scenario">h. <em>The competition focused on minimizing the average MAPE of the next four values across all 518 series. How does this goal differ from goals encountered in practice when considering tourism demand? Which steps in the forecasting process would likely be different in a real-life tourism forecasting scenario?</em></a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project: The Forecasting Tourism 2010 Competition</h1>
<p class="subtitle lead">EM1415</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Marco Solari, 875475 </p>
          </div>
  </div>
    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">January 5, 2024</p>
    </div>
  </div>
    
  </div>
  

</header>

<hr>
<section id="setup-and-data-loading" class="level1">
<h1>Setup and Data Loading</h1>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>libraries_list <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tidyverse"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"fpp3"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ggthemes"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">X =</span> libraries_list,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">FUN =</span> require,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">character.only =</span> <span class="cn">TRUE</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">

</div>
</section>
<section id="sec-dataload" class="level2">
<h2 class="anchored" data-anchor-id="sec-dataload">Loading Data</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>data_main <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Data/tourism_data.csv"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_col_types =</span> F</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data_main <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  dim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  43 518</code></pre>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data_main <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">is.na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  sum</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11668</code></pre>
</div>
</div>
<p>We are missing 52.38% of the observations.</p>
</section>
<section id="creating-a-tsibble" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-tsibble">Creating a <code>tsibble</code></h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>tourism_full <span class="ot">&lt;-</span> data_main <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Year =</span> <span class="dv">1965</span><span class="sc">:</span><span class="dv">2007</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">index =</span> Year</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>tmelt <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  tourism_full, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="st">"Year"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable.name =</span> <span class="st">"Identifier"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">value.name =</span> <span class="st">"Value"</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">index =</span> <span class="st">"Year"</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">key =</span> <span class="st">"Identifier"</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>tmelt <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22274     3</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-tmelt" class="anchored">

<div data-pagedtable="false"> <div class="table-caption">Table&nbsp;1:  Excerpt of melted tsibble containing all time series. </div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Year"],"name":[1],"type":["int"],"align":["right"]},{"label":["Identifier"],"name":[2],"type":["fct"],"align":["left"]},{"label":["Value"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"1998","2":"Y518","3":"1504"},{"1":"1999","2":"Y518","3":"1343"},{"1":"2000","2":"Y518","3":"1583"},{"1":"2001","2":"Y518","3":"1772"},{"1":"2002","2":"Y518","3":"1676"},{"1":"2003","2":"Y518","3":"1423"},{"1":"2004","2":"Y518","3":"1751"},{"1":"2005","2":"Y518","3":"1385"},{"1":"2006","2":"Y518","3":"1229"},{"1":"2007","2":"Y518","3":"1102"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
<p><code>tmelt</code> (<a href="#tbl-tmelt">Table&nbsp;1</a>) contains the <em>melted</em> data frame, which allows us to apply the tidy forecasting workflow to all 518 time series at once. Its main variables are:</p>
<ul>
<li><code>index</code>: <code>Year</code>, as in the original data frame.</li>
<li><code>key</code>: <code>Identifier</code>, a new categorical variable allowing us to transform the data frame into a tidy format; it consists of a set of <em>labels</em> that identify each time series.</li>
<li><code>value</code>: the <span class="math inline">Y_t</span> value for each time series.</li>
</ul>
</section>
</section>
<section id="assignment" class="level1 page-columns page-full">
<h1>Assignment</h1>
<section id="full-plot" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="full-plot">Full Plot</h2>
<p>In all the subsequent plots, a <span class="math inline">log_{10}</span> transformation has been employed exclusively for representing the time series on the y-axis. This adjustment becomes necessary since the original data range<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> does not permit a clear and meaningful visualization of the series when plotted together.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>tmelt <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reframe</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Range"</span> <span class="ot">=</span>  <span class="fu">range</span>(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>      Value, </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm =</span> T, </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">finite =</span> T</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Y"</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"min"</span>, </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"max"</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">.before =</span> <span class="st">"Range"</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tbl-range" class="anchored">

<div data-pagedtable="false"> <div class="table-caption">Table&nbsp;2:  Range of Tourism Time Series </div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Y"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Range"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"min","2":"5.810000e-02"},{"1":"max","2":"5.200294e+07"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
<section id="everything-everywhere-all-at-once" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="everything-everywhere-all-at-once">Everything, Everywhere, All At Once</h3>
<blockquote class="blockquote">
<p><em>Plot all the series (an advanced data visualization tool is recommended) - what type of components are visible? Are the series similar or different? Check for problems such as missing values and possible errors.</em></p>
</blockquote>
<div class="cell page-columns page-full" data-fig-full="12">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>tmelt <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> Year,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> Value,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> Identifier,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">group =</span> Identifier</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> .<span class="dv">8</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rug</span>(</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">sides =</span> <span class="st">"l"</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.02</span>, <span class="st">"npc"</span>),</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> .<span class="dv">9</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">"cividis"</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Tourism Time Series: Everything All At Once"</span>,</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">expression</span>(log[<span class="dv">10</span>](Value))</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>      <span class="dv">1</span>,</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>      <span class="dv">1</span>,</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>      <span class="dv">3</span>,</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>      <span class="dv">1</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page">
<div id="fig-every" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="PBF-Project_HTML_files/figure-html/fig-every-1.png" class="img-fluid figure-img" width="960"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Printing a legend for 518 different series is not a viable option. However, color has been used only to differentiate the series and does not contain further information. Plotting the y-axis variable on the log scale was made necessary by the huge variation in the series values; a rug plot on the left-hand side represents the log-transformed distribution of values and allows to determine the overall skewness, position, and asymmetry.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>While plotting all 518 series simultaneously may hinder the clear identification of specific details, a distinct overall upward trend is visible. Additionally, noteworthy outliers can be spotted, warranting further investigation. Furthermore, indications of cyclicality in certain series can be observed, as well as spikes and steep falls.</p>
<p>Using boxplots (<a href="#fig-box">Figure&nbsp;2</a>) allows us to focus on the distribution of values, obtaining a clearer visualization of the overall trend by de-cluttering the chart and aggregating the overall information available. We can see that, after the availability of time series increases, the process stabilizes within a range of values.</p>
<div class="cell page-columns page-full">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>tmelt <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    Identifier</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> Year <span class="sc">%&gt;%</span> as_factor,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> Value</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tufteboxplot</span>(</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">median.type =</span> <span class="st">"line"</span>,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">whisker.type =</span> <span class="st">"point"</span>,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.5</span>,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Tourism Time Series: De-Cluttering with Tufte Boxplots"</span>,</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">expression</span>(log[<span class="dv">10</span>](Value))</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">angle =</span> <span class="dv">270</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page">
<div id="fig-box" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="PBF-Project_HTML_files/figure-html/fig-box-1.png" class="img-fluid figure-img" width="1152"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: This version of the boxplot, introduced by E. Tufte in ‘Visual Display of Quantitative Information’ (2001), is interpreted in the following manner: the black lines represent the IQR, with a white space positioned at the median. The black dots indicate the end of the whiskers of the boxplot, extending to 3/2 times the IQR.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>A check for <code>NA</code>s has already been made while loading data (<a href="#sec-dataload">Section&nbsp;1.2</a>) and it showed the presence of a large number of missing values, corresponding to 52.38% of all observations. This can be attributed to the difference in the initial timestamps of the series. We can categorize these series based on their respective starting years, indicating that an alternative visualization approach could be effectively implemented through this grouping method (<a href="#fig-tsgrouped">Figure&nbsp;3</a>).</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>tmelt <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Available Observations"</span> <span class="ot">=</span> <span class="fu">sum</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Value)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false"> <div class="table-caption">Missing observation by year: the presence of missing observations is related to the scarcity of long-run time series.</div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Year"],"name":[1],"type":["int"],"align":["right"]},{"label":["Available Observations"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"1965","2":"2"},{"1":"1966","2":"2"},{"1":"1967","2":"2"},{"1":"1968","2":"2"},{"1":"1969","2":"2"},{"1":"1970","2":"2"},{"1":"1971","2":"2"},{"1":"1972","2":"2"},{"1":"1973","2":"2"},{"1":"1974","2":"2"},{"1":"1975","2":"2"},{"1":"1976","2":"2"},{"1":"1977","2":"13"},{"1":"1978","2":"13"},{"1":"1979","2":"18"},{"1":"1980","2":"29"},{"1":"1981","2":"31"},{"1":"1982","2":"47"},{"1":"1983","2":"66"},{"1":"1984","2":"70"},{"1":"1985","2":"336"},{"1":"1986","2":"342"},{"1":"1987","2":"342"},{"1":"1988","2":"342"},{"1":"1989","2":"342"},{"1":"1990","2":"391"},{"1":"1991","2":"406"},{"1":"1992","2":"419"},{"1":"1993","2":"419"},{"1":"1994","2":"419"},{"1":"1995","2":"419"},{"1":"1996","2":"489"},{"1":"1997","2":"494"},{"1":"1998","2":"503"},{"1":"1999","2":"503"},{"1":"2000","2":"503"},{"1":"2001","2":"518"},{"1":"2002","2":"518"},{"1":"2003","2":"518"},{"1":"2004","2":"518"},{"1":"2005","2":"518"},{"1":"2006","2":"518"},{"1":"2007","2":"518"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>The set of complete time series starts in 2001.</p>
</section>
<section id="plotting-series-by-starting-year" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="plotting-series-by-starting-year">Plotting Series By Starting Year</h3>
<p>Arranging the series chronologically by their starting year not only aids in evaluating their variability but also amplifies clarity.</p>
<p>This grouping stresses the already noted upward trend, except for most series kickstarting in 2001 (top-left subplot of <a href="#fig-tsgrouped">Figure&nbsp;3</a>). Another notable group of outliers can be seen in the subplot titled 18<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>: in this group, we can spot a cluster of series in which the upward trend is inverted.</p>
<div class="cell page-columns page-full">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>tmelt <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    Identifier</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">series_length =</span> <span class="dv">43</span> <span class="sc">-</span>  Value <span class="sc">%&gt;%</span> is.na <span class="sc">%&gt;%</span> sum</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">desc</span>(</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>      series_length</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">series_length =</span> <span class="fu">as_factor</span>(series_length)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> Year</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> Value,</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> Identifier</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span>series_length,</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">nrow =</span> <span class="dv">6</span>,</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncol =</span> <span class="dv">3</span>,</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">scales =</span> <span class="st">"free"</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Tourism Time Series By Starting Year"</span>,</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">expression</span>(log[<span class="dv">10</span>](Value))</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">"cividis"</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page">
<div id="fig-tsgrouped" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="PBF-Project_HTML_files/figure-html/fig-tsgrouped-1.png" class="img-fluid figure-img" width="1152"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: All series have been grouped by starting year and plotted to achieve more clarity. Each subtitle represents the number of periods for each subset. The same color mapping of <a href="#fig-every">Figure&nbsp;1</a> has been used to differentiate the series. The y-axis scale has been allowed to change freely to enhance the time series patterns visible in each subplot.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="creating-validation-set" class="level2">
<h2 class="anchored" data-anchor-id="creating-validation-set">Creating Validation Set</h2>
<blockquote class="blockquote">
<p><em>Partition the series into training and validation, so that the last 4 years are in the validation period for each series. What is the logic of such a partitioning? What is the disadvantage?</em></p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> tmelt <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    Year <span class="sc">&lt;</span> <span class="dv">2004</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>validation <span class="ot">&lt;-</span> tmelt <span class="sc">%&gt;%</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    Year <span class="sc">&gt;=</span> <span class="dv">2004</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>validation <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Year"],"name":[1],"type":["int"],"align":["right"]},{"label":["Identifier"],"name":[2],"type":["fct"],"align":["left"]},{"label":["Value"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"2004","2":"Y1","3":"32613.50"},{"1":"2005","2":"Y1","3":"36053.17"},{"1":"2006","2":"Y1","3":"38472.75"},{"1":"2007","2":"Y1","3":"38420.89"},{"1":"2004","2":"Y2","3":"450569.00"},{"1":"2005","2":"Y2","3":"421513.00"},{"1":"2006","2":"Y2","3":"426166.00"},{"1":"2007","2":"Y2","3":"265729.00"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>The logic behind partitioning the series into a <em>training</em> and <em>validation</em> set is to <em>estimate the forecasting error</em>: we can train a model or apply a filter to the train set and use it to estimate its performance with out-of-sample data. The main disadvantage of this approach is that we are not using all the information available to train our model; moreover, we are not computing <em>true forecasts</em>, therefore the accuracy measures from the residuals will be smaller.</p>
</section>
<section id="naïve-forecasts" class="level2">
<h2 class="anchored" data-anchor-id="naïve-forecasts">Naïve Forecasts</h2>
<blockquote class="blockquote">
<p><em>Generate naïve forecasts for all series for the validation period. For each series, create forecasts with horizons of 1, 2, 3, and 4 years ahead (</em><span class="math inline">F_{t+1}, F_{t+2}, F_{t+3}</span>, and <span class="math inline">F_{t+4}</span>).</p>
</blockquote>
<p>We can produce the forecasts by applying <a href="#eq-naive">Equation&nbsp;1</a>:</p>
<p><span id="eq-naive"><span class="math display">
y_{T + h \ | \ T} = y_T
\tag{1}</span></span></p>
<p>First of all, initializing a naïve model will allow us to use <code>R</code> to compute both point forecasts and prediction intervals:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>naive_model <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">NAIVE</span>(</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>      Value</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><code>naive_model</code> will contain a <code>mable</code> for all the series, to be used to compute both <em>training</em> and <em>validation</em> errors.</p>
<p>To obtain <span class="math inline">F_{t+1}, F_{t+2}, F_{t+3}</span>, and <span class="math inline">F_{t+4}</span>:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>naive_fc <span class="ot">&lt;-</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  naive_model <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">h =</span> <span class="dv">4</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>naive_fc <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Identifier"],"name":[1],"type":["fct"],"align":["left"]},{"label":[".model"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Value"],"name":[4],"type":["dist"],"align":["right"]},{"label":[".mean"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Y514","2":"NAIVE(Value)","3":"2004","4":"<dist>","5":"1603"},{"1":"Y514","2":"NAIVE(Value)","3":"2005","4":"<dist>","5":"1603"},{"1":"Y514","2":"NAIVE(Value)","3":"2006","4":"<dist>","5":"1603"},{"1":"Y514","2":"NAIVE(Value)","3":"2007","4":"<dist>","5":"1603"},{"1":"Y515","2":"NAIVE(Value)","3":"2004","4":"<dist>","5":"1655"},{"1":"Y515","2":"NAIVE(Value)","3":"2005","4":"<dist>","5":"1655"},{"1":"Y515","2":"NAIVE(Value)","3":"2006","4":"<dist>","5":"1655"},{"1":"Y515","2":"NAIVE(Value)","3":"2007","4":"<dist>","5":"1655"},{"1":"Y516","2":"NAIVE(Value)","3":"2004","4":"<dist>","5":"1266"},{"1":"Y516","2":"NAIVE(Value)","3":"2005","4":"<dist>","5":"1266"},{"1":"Y516","2":"NAIVE(Value)","3":"2006","4":"<dist>","5":"1266"},{"1":"Y516","2":"NAIVE(Value)","3":"2007","4":"<dist>","5":"1266"},{"1":"Y517","2":"NAIVE(Value)","3":"2004","4":"<dist>","5":"1864"},{"1":"Y517","2":"NAIVE(Value)","3":"2005","4":"<dist>","5":"1864"},{"1":"Y517","2":"NAIVE(Value)","3":"2006","4":"<dist>","5":"1864"},{"1":"Y517","2":"NAIVE(Value)","3":"2007","4":"<dist>","5":"1864"},{"1":"Y518","2":"NAIVE(Value)","3":"2004","4":"<dist>","5":"1423"},{"1":"Y518","2":"NAIVE(Value)","3":"2005","4":"<dist>","5":"1423"},{"1":"Y518","2":"NAIVE(Value)","3":"2006","4":"<dist>","5":"1423"},{"1":"Y518","2":"NAIVE(Value)","3":"2007","4":"<dist>","5":"1423"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="sec-measures" class="level2">
<h2 class="anchored" data-anchor-id="sec-measures">Choosing Measures</h2>
<blockquote class="blockquote">
<p><em>Which measures are suitable if we plan to combine the results for the 518 series? Consider MAE, Average error, MAPE and RMSE.</em></p>
</blockquote>
<p>When combining forecasting results for multiple time series it is crucial to account for the scale and potential variations across the series. The choice of measures can impact the overall assessment of forecasting accuracy.</p>
<p>The Mean Absolute Error (MAE) is a suitable measure to quantify the average absolute errors across all series without considering the direction of the errors. It provides a straightforward indication of the average magnitude of forecasting errors.</p>
<p>The Average Error<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> can complement the MAE by providing a simple measure of the overall bias in the forecasting. However, it might not be suitable if positive and negative errors can cancel each other out.</p>
<p>The Mean Absolute Percentage Error (MAPE) is suitable for evaluating the forecasting accuracy in percentage terms, which can be particularly useful when dealing with many series of different scales. However, it is sensitive to series with small actual values.</p>
<p>Last but not least, the Root Mean Squared Error (RMSE) is suitable to penalize larger errors more heavily<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. It provides a balance between considering both large and small errors; like the MAE, it doesn’t consider the direction of errors.</p>
<p>Having a very wide range of values, as seen in <a href="#tbl-range">Table&nbsp;2</a>, the MAPE is the candidate for the most useful error measure among the ones listed<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>, to ensure consistency when evaluating the forecasting error across different scaled series.</p>
</section>
<section id="computing-mape" class="level2">
<h2 class="anchored" data-anchor-id="computing-mape">Computing MAPE</h2>
<blockquote class="blockquote">
<p><em>For each series, compute the MAPE of the naive forecasts once for the training period and once for the validation period.</em></p>
</blockquote>
<section id="training-period" class="level3">
<h3 class="anchored" data-anchor-id="training-period">Training Period:</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>errors_training <span class="ot">&lt;-</span> naive_model <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">accuracy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This is the training MAPE for the first 10 series:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>errors_training <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    Identifier,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    .type,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    MAPE</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Identifier"],"name":[1],"type":["fct"],"align":["left"]},{"label":[".type"],"name":[2],"type":["chr"],"align":["left"]},{"label":["MAPE"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Y1","2":"Training","3":"4.104646"},{"1":"Y2","2":"Training","3":"10.392033"},{"1":"Y3","2":"Training","3":"12.815980"},{"1":"Y4","2":"Training","3":"15.022398"},{"1":"Y5","2":"Training","3":"6.771865"},{"1":"Y6","2":"Training","3":"6.441830"},{"1":"Y7","2":"Training","3":"5.526134"},{"1":"Y8","2":"Training","3":"3.936621"},{"1":"Y9","2":"Training","3":"10.516378"},{"1":"Y10","2":"Training","3":"10.321529"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="validation-period" class="level3">
<h3 class="anchored" data-anchor-id="validation-period">Validation Period:</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>errors_validation <span class="ot">&lt;-</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">accuracy</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    naive_fc,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    validation</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This is the validation MAPE for the first 10 series:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>errors_validation <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    Identifier,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    .type,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    MAPE</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Identifier"],"name":[1],"type":["fct"],"align":["left"]},{"label":[".type"],"name":[2],"type":["chr"],"align":["left"]},{"label":["MAPE"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Y1","2":"Test","3":"16.58727"},{"1":"Y2","2":"Test","3":"22.12467"},{"1":"Y3","2":"Test","3":"29.32627"},{"1":"Y4","2":"Test","3":"20.51794"},{"1":"Y5","2":"Test","3":"24.44290"},{"1":"Y6","2":"Test","3":"15.28149"},{"1":"Y7","2":"Test","3":"17.13218"},{"1":"Y8","2":"Test","3":"12.30457"},{"1":"Y9","2":"Test","3":"13.39204"},{"1":"Y10","2":"Test","3":"16.17211"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="comparison-table" class="level3">
<h3 class="anchored" data-anchor-id="comparison-table">Comparison Table</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>MAPE_comparison <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>errors_training[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ] <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(MAPE) <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(., <span class="at">digits =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Set =</span> <span class="st">"Training"</span>,</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.before =</span> V1</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>(),</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>errors_validation[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ] <span class="sc">%&gt;%</span> </span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(MAPE) <span class="sc">%&gt;%</span> </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(., <span class="at">digits =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Set =</span> <span class="st">"Validation"</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(MAPE_comparison) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Set"</span>, </span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    errors_training<span class="sc">$</span>Identifier <span class="sc">%&gt;%</span> </span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>() <span class="sc">%&gt;%</span> unique </span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>MAPE_comparison</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false"> <div class="table-caption">Naïve forecasts training and validation MAPEs for the first 10 time series.</div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Set"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Y1"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Y2"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Y3"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Y4"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Y5"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Y6"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Y7"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Y8"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Y9"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["Y10"],"name":[11],"type":["dbl"],"align":["right"]}],"data":[{"1":"Training","2":"4.10","3":"10.39","4":"12.82","5":"15.02","6":"6.77","7":"6.44","8":"5.53","9":"3.94","10":"10.52","11":"10.32"},{"1":"Validation","2":"16.59","3":"22.12","4":"29.33","5":"20.52","6":"24.44","7":"15.28","8":"17.13","9":"12.30","10":"13.39","11":"16.17"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="computing-mase" class="level2">
<h2 class="anchored" data-anchor-id="computing-mase">Computing MASE</h2>
<blockquote class="blockquote">
<p><em>The performance measure used in the competition is Mean Absolute Scaled Error (MASE). Explain the advantage of MASE and compute the training and validation MASE for the naive forecasts.</em></p>
</blockquote>
<p>The Mean Absolute Scaled Error (MASE) serves as a robust performance metric thanks to its scale-independence. This quality makes it well-suited for the comparative assessment of forecast accuracy across diverse time series characterized by differing scales and magnitudes, such as in this dataset, accounting for the inherent scale differences among them by scaling the errors based on the training MAE from a simple forecast method.</p>
<p>It is an alternative to <em>percentage errors</em> such as the MAPE. For a non-seasonal time series, a useful way to define a scaled error uses naïve forecasts: because the numerator and denominator both involve values on the scale of the original data, scaled errors are independent of the scale of the data.</p>
<section id="sec-train_MASE" class="level3">
<h3 class="anchored" data-anchor-id="sec-train_MASE">Training Period:</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>errors_training <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    Identifier,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    .type,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    MASE</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false"> <div class="table-caption">Training MASE for the first 10 series.</div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Identifier"],"name":[1],"type":["fct"],"align":["left"]},{"label":[".type"],"name":[2],"type":["chr"],"align":["left"]},{"label":["MASE"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Y1","2":"Training","3":"1"},{"1":"Y2","2":"Training","3":"1"},{"1":"Y3","2":"Training","3":"1"},{"1":"Y4","2":"Training","3":"1"},{"1":"Y5","2":"Training","3":"1"},{"1":"Y6","2":"Training","3":"1"},{"1":"Y7","2":"Training","3":"1"},{"1":"Y8","2":"Training","3":"1"},{"1":"Y9","2":"Training","3":"1"},{"1":"Y10","2":"Training","3":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Since MASE indicates the effectiveness of the forecasting algorithm for a naïve forecast, a value greater than one 1 indicates that the algorithm is performing poorly compared to the naïve forecast, and vice-versa: hence, since we have been computing the naïve MASE of in-sample data, it is equal to 1 for all time series in our training dataset.</p>
</section>
<section id="validation-period-1" class="level3">
<h3 class="anchored" data-anchor-id="validation-period-1">Validation Period:</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>errors_validation <span class="ot">&lt;-</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">accuracy</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    naive_fc,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    tmelt</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This is the validation MASE for the first 10 series:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>errors_validation <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    Identifier,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    .type,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    MASE</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false"> <div class="table-caption">Validation MASE for the first 10 series.</div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Identifier"],"name":[1],"type":["fct"],"align":["left"]},{"label":[".type"],"name":[2],"type":["chr"],"align":["left"]},{"label":["MASE"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Y1","2":"Test","3":"5.474326"},{"1":"Y2","2":"Test","3":"4.476840"},{"1":"Y3","2":"Test","3":"3.740707"},{"1":"Y4","2":"Test","3":"2.310849"},{"1":"Y5","2":"Test","3":"10.320584"},{"1":"Y6","2":"Test","3":"4.757987"},{"1":"Y7","2":"Test","3":"4.738439"},{"1":"Y8","2":"Test","3":"4.025292"},{"1":"Y9","2":"Test","3":"2.812082"},{"1":"Y10","2":"Test","3":"3.957335"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="comparison-table-1" class="level3">
<h3 class="anchored" data-anchor-id="comparison-table-1">Comparison Table:</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>MASE_comparison <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>errors_training[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ] <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(MASE) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(., <span class="at">digits =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Set =</span> <span class="st">"Training"</span>,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.before =</span> V1</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>(),</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>errors_validation[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ] <span class="sc">%&gt;%</span> </span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(MASE) <span class="sc">%&gt;%</span> </span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(., <span class="at">digits =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Set =</span> <span class="st">"Validation"</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(MASE_comparison) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Set"</span>, </span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>    errors_training<span class="sc">$</span>Identifier <span class="sc">%&gt;%</span> </span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>    unique <span class="sc">%&gt;%</span> </span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>MASE_comparison</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false"> <div class="table-caption">Naïve forecasts training and validation MASEs for the first 10 time series.</div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Set"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Y1"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Y2"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Y3"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Y4"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Y5"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Y6"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Y7"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Y8"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Y9"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["Y10"],"name":[11],"type":["dbl"],"align":["right"]}],"data":[{"1":"Training","2":"1.00","3":"1.00","4":"1.00","5":"1.00","6":"1.00","7":"1.00","8":"1.00","9":"1.00","10":"1.00","11":"1.00"},{"1":"Validation","2":"5.47","3":"4.48","4":"3.74","5":"2.31","6":"10.32","7":"4.76","8":"4.74","9":"4.03","10":"2.81","11":"3.96"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="mape-mase-pairs" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="mape-mase-pairs">MAPE &amp; MASE Pairs</h2>
<blockquote class="blockquote">
<p><em>Create a scatter plot of the MAPE pairs, with the training MAPE on the x-axis and the validation MAPE on the y-axis. Create a similar scatter plot for the MASE pairs. Now examine both plots. What do we learn? How does performance differ between the training and validation periods? How does performance range across series?</em></p>
</blockquote>
<div class="cell">

</div>
<div class="cell page-columns page-full">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> MAPE_pairs, </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> Training_MAPE,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> Validation_MAPE,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> Series_Identifier</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">geom_point</span>(</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">alpha =</span> .<span class="dv">8</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rug</span>() <span class="sc">+</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">slope =</span> <span class="dv">1</span>,</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"grey80"</span>,</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Training and Validation MAPE pairs, colored by series"</span>,</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Training MAPE"</span>,</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Validation MAPE"</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">"cividis"</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>  theme_updater</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="PBF-Project_HTML_files/figure-html/MAPE%20scatterplot-1.png" class="img-fluid figure-img" width="1152"></p>
<p></p><figcaption class="figure-caption">Scatterplot of training and validation MAPE pairs: on both axes, the distribution of values. The time series have been colored using the same mapping seen in <a href="#fig-every">Figure&nbsp;1</a>.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell">

</div>
<div class="cell page-columns page-full">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    MASE_pairs,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> Training_MASE,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> Validation_MASE,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> Series_Identifier</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">geom_point</span>(</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rug</span>() <span class="sc">+</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Training and Validation MASE pairs, colored by series"</span>,</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Training MASE"</span>,</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Validation MASE"</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">"cividis"</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>  theme_updater</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page">
<div id="fig-mase" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="PBF-Project_HTML_files/figure-html/fig-mase-1.png" class="img-fluid figure-img" width="1152"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;4: Scatterplot of training and validation MASE pairs: on both axes, the distribution of values. The time series have been colored using the same mapping seen in <a href="#fig-every">Figure&nbsp;1</a>.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>We can add some jitter to better visualize the points:</p>
<div class="cell page-columns page-full">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    MASE_pairs,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> Training_MASE,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> Validation_MASE,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> Series_Identifier</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rug</span>() <span class="sc">+</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Training and Validation MASE pairs, colored by series"</span>,</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Training MASE"</span>,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Validation MASE"</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">"cividis"</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_tufte</span>(</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_size =</span> <span class="dv">16</span>,</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_family =</span> custom_typeface,</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">ticks =</span> F</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="PBF-Project_HTML_files/figure-html/jittered%20MASE%20pairs-1.png" class="img-fluid figure-img" width="1152"></p>
<p></p><figcaption class="figure-caption">Jittered scatterplot of all MASE pairs: same as in <a href="#fig-mase">Figure&nbsp;4</a>, but with added noise to separate the cluster.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>There is no apparent pattern in all the scatterplots. The distribution of MAPE and MASE pairs is highly asymmetrical and skewed towards lower values, but the performance of the naïve method varies across series. In most cases, the points are above the 45-degree line, indicating that, on average, the performance is worse on the validation set compared to the training set.</p>
<p>There are some evident outliers, corresponding to the same series for both accuracy measures; these outliers mostly fall above the bisection line, confirming a deterioration in performance across sets, which is a tell-tale sign of overfitting. In simple terms, the chosen model is not on average generalizing well, hindering its predictive abilities.</p>
<p>A final word on the MASE pair plots: since the entire training set has an accuracy score of 1 for all series (as explained in <a href="#sec-train_MASE">Section&nbsp;2.6.1</a>, we are scaling naïve forecasts by the same naïve forecasts), all points align on the same vertical line, making interpretation challenging. Introducing some noise allows some separation and exposes the absence of patterns. This distribution, on the y-axis, reveals two important points: first of all, most predictions on the validation set center around 0, but in numerous series the forecasting method is underperforming. Secondly, outliers are clustered in groups: to fine-tune the algorithm, insights could be obtained to address this overall loss of accuracy by examining the series by these groups and choosing a more appropriate forecasting method.</p>
</section>
<section id="ensemble-methods" class="level2">
<h2 class="anchored" data-anchor-id="ensemble-methods">Ensemble Methods</h2>
<blockquote class="blockquote">
<p><em>The competition winner, Lee Baker, used an ensemble of three methods:</em></p>
<ul>
<li><em>Naive forecasts multiplied by a constant trend</em><a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>.</li>
<li><em>Linear regression</em>.</li>
<li><em>Exponentially-weighted linear regression</em>.</li>
</ul>
</blockquote>
<section id="a.-write-the-exact-formula-used-for-generating-the-first-method-in-the-form-f_tk-...-where-k-1-2-3-4" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="a.-write-the-exact-formula-used-for-generating-the-first-method-in-the-form-f_tk-...-where-k-1-2-3-4">a. <em>Write the exact formula used for generating the first method, in the form</em> <span class="math inline">F_{t+k} = ...</span>, where <span class="math inline">k = 1, 2, 3, 4)</span>,</h3>
<p>Starting from <a href="#eq-naive">Equation&nbsp;1</a> and introducing a constant trend multiplier, denoted as <span class="math inline">k</span><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>, we can express the equation for naïve forecasts multiplied by this constant trend as follows:</p>
<p><span id="eq-trendednaive"><span class="math display">
y_{T + h \ | \ T} = y_T \times (1 + k)^h
\tag{2}</span></span></p>
<p><span class="math inline">h</span>, as usual, is the number of years in the future we want to forecast. This formulation represents the extension of naïve forecasts, incorporating a constant trend multiplier, thereby accounting for a consistent trend in the time series data.</p>
</section>
<section id="b.-what-is-the-rationale-behind-multiplying-the-naive-forecasts-by-a-constant2" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="b.-what-is-the-rationale-behind-multiplying-the-naive-forecasts-by-a-constant2">b. <em>What is the rationale behind multiplying the naive forecasts by a constant?</em><a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></h3>
<p>The rationale would be to enhance the performance of naïve forecasts, a benchmark method, to apply them with real data that show a pronounced trended behaviour. While some other approaches can describe an average change over time<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>, empirical and domain knowledge indicate that, in certain instances, the temporal evolution can be adequately represented by a constant: consequently, mixing a <em>random walk</em> behaviour with a constant trend aims at modeling the data more closely.</p>
</section>
<section id="c.-what-should-be-the-dependent-variable-and-the-predictors-in-a-linear-regression-model-for-this-data-explain." class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="c.-what-should-be-the-dependent-variable-and-the-predictors-in-a-linear-regression-model-for-this-data-explain.">c.&nbsp;<em>What should be the dependent variable and the predictors in a linear regression model for this data? Explain.</em></h3>
<p>In the absence of any predictors in the data, a standard strategy involves formulating an <span class="math inline">AR(p)</span> model to capture dependencies of <span class="math inline">Y_{T + h | T}</span> on its past:</p>
<p><span id="eq-AR"><span class="math display">
y_t = c + \phi_1 y_{t - 1} + \phi_2 y_{t - 2} + ... + \phi_p y_{t - p} + \epsilon_t
\tag{3}</span></span></p>
<p>However, the time series are not stationary: this model would necessitate transformations to remove the trend, resulting in the loss of essential information crucial for accurate forecasting. Consequently, an alternative approach is to devise a simple linear model incorporating an independent trend variable:</p>
<p><span id="eq-lineartrended"><span class="math display">
y_t = \beta_0 + \beta_1 t + \epsilon_t
\tag{4}</span></span></p>
<p>This latter methodology appears to align more consistently with the overall information available about the series and the models employed by the contest winner.</p>
</section>
<section id="d.-fit-the-linear-regression-model-to-the-first-five-series-and-compute-forecast-errors-for-the-validation-period." class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="d.-fit-the-linear-regression-model-to-the-first-five-series-and-compute-forecast-errors-for-the-validation-period.">d.&nbsp;<em>Fit the linear regression model to the first five series and compute forecast errors for the validation period.</em></h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>ts_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Y1"</span>, <span class="st">"Y2"</span>, <span class="st">"Y3"</span>, <span class="st">"Y4"</span>, <span class="st">"Y5"</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>ts_trend_fit <span class="ot">&lt;-</span> tmelt <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    Identifier <span class="sc">%in%</span> ts_list) <span class="sc">%&gt;%</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">TSLM</span>(</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>      Value <span class="sc">~</span> <span class="fu">trend</span>()</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>ts_trend_fit <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">report</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    Identifier,</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    p_value,</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    r_squared,</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    AICc</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false"> <div class="table-caption">Selection of resulting selection criteria scores for the Time Series linear models, fitted for the first 5 series over the validation period.</div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Identifier"],"name":[1],"type":["fct"],"align":["left"]},{"label":["p_value"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["r_squared"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["AICc"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Y1","2":"6.252393e-07","3":"0.9438223","4":"164.7734"},{"1":"Y2","2":"1.255493e-16","3":"0.9089079","4":"658.0936"},{"1":"Y3","2":"3.479718e-12","3":"0.8381282","4":"587.1175"},{"1":"Y4","2":"1.762500e-06","3":"0.7913794","4":"331.4518"},{"1":"Y5","2":"5.411920e-03","3":"0.4128168","4":"303.2326"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>ts_trend_fit <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    validation</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">%&gt;%</span> </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">accuracy</span>(</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    tmelt</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    Identifier,</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    MAPE,</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    MASE</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false"> <div class="table-caption">Selection of accuracy measures for the TSLM.</div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Identifier"],"name":[1],"type":["fct"],"align":["left"]},{"label":["MAPE"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["MASE"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Y1","2":"2.778091","3":"0.8939776"},{"1":"Y2","2":"22.531215","3":"4.1514711"},{"1":"Y3","2":"24.395109","3":"2.7068572"},{"1":"Y4","2":"8.212244","3":"0.8510743"},{"1":"Y5","2":"34.587228","3":"10.5721022"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="e.-before-choosing-a-linear-regression-the-winner-described-the-following-process" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="e.-before-choosing-a-linear-regression-the-winner-described-the-following-process">e. <em>Before choosing a linear regression, the winner described the following process:</em></h3>
<p>“I examined fitting a polynomial line to the data and using the line to predict future values. I tried using first through fifth-order polynomials to find that the lowest MASE was obtained using a first-order polynomial (simple regression line). This best-fit line was used to predict future values. I also kept the <span class="math inline">R^2</span> value of the fit for use in blending the results of the prediction.”</p>
<blockquote class="blockquote">
<p><em>What are two flaws in this approach?</em></p>
</blockquote>
<p>A polynomial fitting is useful when the relationship between predictor and response is not linear: in such instances, the Ordinary Least Squares (OLS) estimator still can be used allowing the derivation of a fitting capable of accommodating non-linear relationships, while preserving linearity in the parameters. Adding polynomial terms at random leads to overfitting in most cases, leading to the excess variance that does not generalize well to out-of-sample data. Moreover, considering our context of a straightforward trended linear model, the incorporation of higher-order polynomial trends may compromise interpretability.</p>
<p>While the <span class="math inline">R^2</span> represents the portion of explained variability by the model, it is based on the <em>sum of squares</em>, which is inconsistent with the given error statistic, the MASE; as written in <a href="#sec-measures">Section&nbsp;2.4</a>, it penalizes larger errors more heavily, while the MASE considers the average magnitude of forecasting errors.</p>
<p>Last but not least, assuming a simple univariate trended linear model, it is also equivalent to the squared correlation between the dependent variable and the predictor<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>, so it is not a proper weight to combine forecasts.</p>
</section>
<section id="f.-if-we-were-to-consider-exponential-smoothing-what-particular-types-of-exponential-smoothing-are-reasonable-candidates" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="f.-if-we-were-to-consider-exponential-smoothing-what-particular-types-of-exponential-smoothing-are-reasonable-candidates">f.&nbsp;<em>If we were to consider exponential smoothing, what particular type(s) of exponential smoothing are reasonable candidates?</em></h3>
<p>We could implement two different exponential smoothings that include a Trend component. Viable candidates are Holt’s linear method <span class="math inline">(A, N)</span> and Additive damped trend method <span class="math inline">(A_d, N)</span>: their performance should be tested against both the validation and test sets to choose the most appropriate.</p>
</section>
<section id="g.-the-winner-concludes-with-possible-improvements-one-being-an-investigation-into-how-to-come-up-with-a-blending-ensemble-method-that-doesnt-use-much-manual-tweaking-would-also-be-of-benefit.-can-you-suggest-methods-or-an-approach-that-would-lead-to-easier-automation-of-the-ensemble-step" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="g.-the-winner-concludes-with-possible-improvements-one-being-an-investigation-into-how-to-come-up-with-a-blending-ensemble-method-that-doesnt-use-much-manual-tweaking-would-also-be-of-benefit.-can-you-suggest-methods-or-an-approach-that-would-lead-to-easier-automation-of-the-ensemble-step">g. <em>The winner concludes with possible improvements one being “an investigation into how to come up with a blending ensemble method that doesn’t use much manual tweaking would also be of benefit”. Can you suggest methods or an approach that would lead to easier automation of the ensemble step?</em></h3>
<p>Automation of model selection and amalgamation could be achieved through the adoption of a “loss function”-centered approach, constructed upon the ensemble amalgamation of diverse methods. The allocation of weights to each method’s forecast could be fine-tuned by assessing their performance within the parameter space on the validation set, employing a weighted least squares method.</p>
<p>To find these hyper-parameter estimates numerically, then, we could use different approaches, ranging from a linear combination of weights to a more complex deep neural network, capable of receiving a matrix containing forecasts from various ensemble methods as input, which would enable the learning of optimal weights through backpropagation, facilitated by a properly calibrated activation function. In both cases, learning the model would be equivalent to setting the proper mix of forecasts.</p>
<p>In other words, a machine learning-based approach might prove helpful in choosing the best combination of forecasts, to minimize the MASE of the validation set; nevertheless, caution should be used as it would introduce another potential source of overfitting.</p>
<p>However:</p>
<blockquote class="blockquote">
<p>“<em>While there has been considerable research on using weighted averages, or some other more complicated combination approach, using a simple average has proven hard to beat.</em>”<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>.</p>
</blockquote>
<p>This simple average could work as a benchmark to evaluate the amalgamation method used to build the ensemble forecast.</p>
</section>
<section id="h.-the-competition-focused-on-minimizing-the-average-mape-of-the-next-four-values-across-all-518-series.-how-does-this-goal-differ-from-goals-encountered-in-practice-when-considering-tourism-demand-which-steps-in-the-forecasting-process-would-likely-be-different-in-a-real-life-tourism-forecasting-scenario" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="h.-the-competition-focused-on-minimizing-the-average-mape-of-the-next-four-values-across-all-518-series.-how-does-this-goal-differ-from-goals-encountered-in-practice-when-considering-tourism-demand-which-steps-in-the-forecasting-process-would-likely-be-different-in-a-real-life-tourism-forecasting-scenario">h. <em>The competition focused on minimizing the average MAPE of the next four values across all 518 series. How does this goal differ from goals encountered in practice when considering tourism demand? Which steps in the forecasting process would likely be different in a real-life tourism forecasting scenario?</em></h3>
<p>The main difference in a real-world scenario is the complete absence of <em>prediction intervals</em> and any interest in quantifying <em>uncertainty</em>.</p>
<p>As cleverly stated by the contest winner:</p>
<blockquote class="blockquote">
<p>“<em>If the test set includes data from 2008–2009, I’m speculating that depressed tourism numbers as a result of the global economic recession could have caused a significant difference in the trends.</em>”</p>
</blockquote>
<p>This stresses the importance of understanding the underlying assumptions and the power of using <em>models</em> instead of <em>filters</em>, or in combinations with them.</p>
<p>Gaming a specific statistic is not a viable tool for general or specific purpose forecasting in a real-world scenario: on the one hand because we might be interested in a different question than the one that a minimized MAPE is answering, or in forecasting for longer time windows; on the other hand, relying solely on the point forecast offers a restricted perspective, neglecting the broader landscape of characteristics such as volatility that may be of interest. For instance, the necessity of computing prediction intervals requires a tailored approach. The amalgamation method applied for the ensemble forecast needs to be taken into account, coupled with the specifics of the computational tools enlisted in implementing the solution<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a>. Merely optimizing a singular statistic fails to account for the multi-faceted demands of comprehensive forecasting.</p>
<p>A last remark is that in a real-world scenario, a forecaster is dealing with the unavailability of such a constant feedback loop, as the contest winner had, of submitting his results and observing a test MAPE on the Kaggle leaderboard. It is often the case that the chances to submit forecasts or act on them face time constraints and the absolute absence of this kind of feedback loop, and this implies the need for more robust planning and instruments, built upon the impossibility of observing the out-of-sample data and any related statistic.</p>
<p>To summarise, forecasting in a real-world context is not only about minimizing errors, but also about understanding the uncertainty in the phenomenon, to better assess the forecasting performance consistently and over time, and not on a specific data “snapshot” taken in a specific window.</p>
<div class="cell" data-result="hide">

</div>
</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><span class="math inline">10^9</span>, as derived from the data shown in <a href="#tbl-range">Table&nbsp;2</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Time series starting in 1989.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Defined as the mean of all individual errors.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Outliers might therefore skew its measurement.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Although scaled errors are not considered and could address the issue of evaluating the performance of series having a wide range, while not being sensitive to small values.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Global/local trend: “globally tourism has grown at a rate of 6% annually.”<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>In the case of an annual growth rate of 6%, <span class="math inline">k = 0.06</span>.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Hint: think empirical and domain knowledge.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>E.g.: the <em>drift method</em>.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>In a multivariate model, the <span class="math inline">R^2</span> corresponds to the squared correlation between <span class="math inline">y_t</span> and <span class="math inline">\hat y_t</span>, so this point still stands.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>Hyndman, R. J., &amp; Athanasopoulos, G. (2018). Forecasting: principles and practice. OTexts.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>One of the solutions proposed earlier, a neural network, would probably pose the same overfitting issues and often outputs overconfident intervals.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>